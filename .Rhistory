library(tweetrmd)
tweet_screenshot(tweet_url(usuario, RT))
library(tweetrmd)
tweet_screenshot(tweet_url(usuario, RT))
usuario <- "LaPlataMLP"
tweet_screenshot(tweet_url(usuario, RT))
Levantarbases <- function(usuario){
Base <<- read.csv(paste0("Datasets/BaseTweets@",usuario,".csv")) #levanta la base
Base <<- Base %>%
select(created_at,
status_id,
screen_name,
text,
is_retweet,
source,
display_text_width,
hashtags,
reply_to_screen_name,
favorite_count,
retweet_count,
reply_count,
ext_media_expanded_url) %>% # seleccionamos varibles relevantes
mutate(mes=as.numeric(month(Base$created_at))) %>% #creamos variable para graficar mes
mutate(hora=as.numeric(hour(Base$created_at))) %>%  #creamos variable para graficar hora
mutate(horaARG= case_when(hora== "0" ~ "21",
hora== "1" ~ "22",
hora== "2" ~ "23",
hora== "3" ~ "0",
hora== "4" ~ "1",
hora== "5" ~ "2",
hora== "6" ~ "3",
hora== "7" ~ "4",
hora== "8" ~ "5",
hora== "9" ~ "6",
hora== "10" ~ "7",
hora== "11" ~ "8",
hora== "12" ~ "9",
hora== "13" ~ "10",
hora== "14" ~ "11",
hora== "15" ~ "12",
hora== "16" ~ "13",
hora== "17" ~ "14",
hora== "18" ~ "15",
hora== "19" ~ "16",
hora== "20" ~ "17",
hora== "21" ~ "18",
hora== "22" ~ "19",
hora== "23" ~ "20",)) %>%
mutate(Fecha_corta=as.Date(created_at))
}
#getwd()
Levantarbases(usuario)
library(rtweet)
library("tidyverse")
library(tm)
library(ggwordcloud)
library(proustr)
library(syuzhet)
library(SnowballC)
library(knitr)
library(kableExtra)
library(tidytext)
library(lubridate)
library(highcharter)
library(wordcloud)
library(tweetrmd)
Levantarbases <- function(usuario){
Base <<- read.csv(paste0("Datasets/BaseTweets@",usuario,".csv")) #levanta la base
Base <<- Base %>%
select(created_at,
status_id,
screen_name,
text,
is_retweet,
source,
display_text_width,
hashtags,
reply_to_screen_name,
favorite_count,
retweet_count,
reply_count,
ext_media_expanded_url) %>% # seleccionamos varibles relevantes
mutate(mes=as.numeric(month(Base$created_at))) %>% #creamos variable para graficar mes
mutate(hora=as.numeric(hour(Base$created_at))) %>%  #creamos variable para graficar hora
mutate(horaARG= case_when(hora== "0" ~ "21",
hora== "1" ~ "22",
hora== "2" ~ "23",
hora== "3" ~ "0",
hora== "4" ~ "1",
hora== "5" ~ "2",
hora== "6" ~ "3",
hora== "7" ~ "4",
hora== "8" ~ "5",
hora== "9" ~ "6",
hora== "10" ~ "7",
hora== "11" ~ "8",
hora== "12" ~ "9",
hora== "13" ~ "10",
hora== "14" ~ "11",
hora== "15" ~ "12",
hora== "16" ~ "13",
hora== "17" ~ "14",
hora== "18" ~ "15",
hora== "19" ~ "16",
hora== "20" ~ "17",
hora== "21" ~ "18",
hora== "22" ~ "19",
hora== "23" ~ "20",)) %>%
mutate(Fecha_corta=as.Date(created_at))
}
#getwd()
Levantarbases(usuario)
Desde <- min(Base$Fecha_corta)
Hasta <- max(Base$Fecha_corta)
cant <- nrow(Base)
tweet_screenshot(tweet_url(usuario, RT))
sdal <- read.csv('sdal.csv', encoding = 'UTF-8')
options(scipen=999)
MensajeMasRetuiteado <- Base %>%
filter(is_retweet == "FALSE") %>%
select(status_id, text, retweet_count,Fecha_corta,ext_media_expanded_url) %>%
arrange(desc(retweet_count)) %>%
head(1)
MensajeMasFaveado <- Base %>%
filter(is_retweet == "FALSE") %>%
select(status_id, text, favorite_count,Fecha_corta,ext_media_expanded_url) %>%
arrange(desc(favorite_count)) %>%
head(1)
kable(MensajeMasFaveado, align = "r") %>%
kable_styling(bootstrap_options = "striped", full_width = F, position = "center")
kable(MensajeMasRetuiteado, align = "r") %>%
kable_styling(bootstrap_options = "striped", full_width = F, position = "center")
tweet_screenshot(tweet_url(usuario, RT))
BaseTokensSDAL <- left_join(BaseTokens, sdal)
BaseTokensSDAL <- left_join(BaseTokens, sdal)
palabras_inutiles <- c('rt','u' ,'t.co', 'https', 'tan', 'Alberto', 'Fernandez', 'alberto', 'fernandez', 'fernández')
Base1 <- as.data.frame(Base)
Base1$text <- as.character(Base1$text)
BaseTokens <- Base1 %>%
filter(!(is_retweet=="TRUE")) %>%
unnest_tokens(palabra, text) %>%
count(palabra, sort=TRUE) %>%
filter(!palabra%in%stopwords('es')) %>%
filter(!palabra%in%palabras_inutiles) %>%
filter(str_detect(palabra, "^[a-zA-z]|^#|^@"))%>%
arrange(desc(n)) %>%
rename('word'=palabra)
wordcloud(BaseTokens$word,BaseTokens$n,scale=c(3,.1),random.order=FALSE,random.color=TRUE,rot.per=0.4,colors=brewer.pal(7,"Dark2"))
fav <- str_sub(MensajeMasFaveado$ext_media_expanded_url,40,58)
RT <- str_sub(MensajeMasRetuiteado$ext_media_expanded_url,40,58)
fav2 <- MensajeMasFaveado$status_id
RT2 <- MensajeMasRetuiteado$status_id
tweet_screenshot(tweet_url(usuario, RT))
tweet_screenshot(tweet_url(usuario, RT2))
tweet_screenshot(tweet_url(usuario, RT2))
tweet_screenshot(tweet_url(usuario, RT))
prueba = tweet_url(usuario, fav)
prueba
prueba1 = tweet_url(usuario, fav)
prueba1
prueba2 = MensajeMasFaveado$ext_media_expanded_url
prueba2
fav
tweet_screenshot(prueba2)
tweet_screenshot(tweet_url(usuario, fav))
prueba1
fav <- str_sub(MensajeMasFaveado$ext_media_expanded_url,39,58)
prueba1 = tweet_url(usuario, fav)
prueba1
tweet_screenshot(tweet_url(usuario, fav))
RT <- str_sub(MensajeMasRetuiteado$ext_media_expanded_url,45,58)
---
title: "Análisis de Tweets de la Municipalidad de San Fernando"
library(rtweet)
library("tidyverse")
library(tm)
library(ggwordcloud)
library(proustr)
library(syuzhet)
library(SnowballC)
library(knitr)
library(kableExtra)
library(tidytext)
library(lubridate)
library(highcharter)
library(wordcloud)
library(tweetrmd)
usuario <- "SanFernandoMunicipio"
Levantarbases <- function(usuario){
Base <<- read.csv(paste0("Datasets/BaseTweets@",usuario,".csv")) #levanta la base
Base <<- Base %>%
select(created_at,
status_id,
screen_name,
text,
is_retweet,
source,
display_text_width,
hashtags,
reply_to_screen_name,
favorite_count,
retweet_count,
reply_count,
ext_media_expanded_url) %>% # seleccionamos varibles relevantes
mutate(mes=as.numeric(month(Base$created_at))) %>% #creamos variable para graficar mes
mutate(hora=as.numeric(hour(Base$created_at))) %>%  #creamos variable para graficar hora
mutate(horaARG= case_when(hora== "0" ~ "21",
hora== "1" ~ "22",
hora== "2" ~ "23",
hora== "3" ~ "0",
hora== "4" ~ "1",
hora== "5" ~ "2",
hora== "6" ~ "3",
hora== "7" ~ "4",
hora== "8" ~ "5",
hora== "9" ~ "6",
hora== "10" ~ "7",
hora== "11" ~ "8",
hora== "12" ~ "9",
hora== "13" ~ "10",
hora== "14" ~ "11",
hora== "15" ~ "12",
hora== "16" ~ "13",
hora== "17" ~ "14",
hora== "18" ~ "15",
hora== "19" ~ "16",
hora== "20" ~ "17",
hora== "21" ~ "18",
hora== "22" ~ "19",
hora== "23" ~ "20",)) %>%
mutate(Fecha_corta=as.Date(created_at))
}
#getwd()
Levantarbases(usuario)
library(rtweet)
library("tidyverse")
library(tm)
library(ggwordcloud)
library(proustr)
library(syuzhet)
library(SnowballC)
library(knitr)
library(kableExtra)
library(tidytext)
library(lubridate)
library(highcharter)
library(wordcloud)
library(tweetrmd)
usuario <- "SanFerMunicipio"
Levantarbases <- function(usuario){
Base <<- read.csv(paste0("Datasets/BaseTweets@",usuario,".csv")) #levanta la base
Base <<- Base %>%
select(created_at,
status_id,
screen_name,
text,
is_retweet,
source,
display_text_width,
hashtags,
reply_to_screen_name,
favorite_count,
retweet_count,
reply_count,
ext_media_expanded_url) %>% # seleccionamos varibles relevantes
mutate(mes=as.numeric(month(Base$created_at))) %>% #creamos variable para graficar mes
mutate(hora=as.numeric(hour(Base$created_at))) %>%  #creamos variable para graficar hora
mutate(horaARG= case_when(hora== "0" ~ "21",
hora== "1" ~ "22",
hora== "2" ~ "23",
hora== "3" ~ "0",
hora== "4" ~ "1",
hora== "5" ~ "2",
hora== "6" ~ "3",
hora== "7" ~ "4",
hora== "8" ~ "5",
hora== "9" ~ "6",
hora== "10" ~ "7",
hora== "11" ~ "8",
hora== "12" ~ "9",
hora== "13" ~ "10",
hora== "14" ~ "11",
hora== "15" ~ "12",
hora== "16" ~ "13",
hora== "17" ~ "14",
hora== "18" ~ "15",
hora== "19" ~ "16",
hora== "20" ~ "17",
hora== "21" ~ "18",
hora== "22" ~ "19",
hora== "23" ~ "20",)) %>%
mutate(Fecha_corta=as.Date(created_at))
}
#getwd()
Levantarbases(usuario)
Desde <- min(Base$Fecha_corta)
Hasta <- max(Base$Fecha_corta)
cant <- nrow(Base)
sdal <- read.csv('sdal.csv', encoding = 'UTF-8')
options(scipen=999)
MensajeMasRetuiteado <- Base %>%
filter(is_retweet == "FALSE") %>%
select(status_id, text, retweet_count,Fecha_corta,ext_media_expanded_url) %>%
arrange(desc(retweet_count)) %>%
head(1)
MensajeMasFaveado <- Base %>%
filter(is_retweet == "FALSE") %>%
select(status_id, text, favorite_count,Fecha_corta,ext_media_expanded_url) %>%
arrange(desc(favorite_count)) %>%
head(1)
kable(MensajeMasFaveado, align = "r") %>%
kable_styling(bootstrap_options = "striped", full_width = F, position = "center")
kable(MensajeMasRetuiteado, align = "r") %>%
kable_styling(bootstrap_options = "striped", full_width = F, position = "center")
palabras_inutiles <- c('rt','u' ,'t.co', 'https', 'tan', 'Alberto', 'Fernandez', 'alberto', 'fernandez', 'fernández')
Base1 <- as.data.frame(Base)
Base1$text <- as.character(Base1$text)
BaseTokens <- Base1 %>%
filter(!(is_retweet=="TRUE")) %>%
unnest_tokens(palabra, text) %>%
count(palabra, sort=TRUE) %>%
filter(!palabra%in%stopwords('es')) %>%
filter(!palabra%in%palabras_inutiles) %>%
filter(str_detect(palabra, "^[a-zA-z]|^#|^@"))%>%
arrange(desc(n)) %>%
rename('word'=palabra)
wordcloud(BaseTokens$word,BaseTokens$n,scale=c(3,.1),random.order=FALSE,random.color=TRUE,rot.per=0.4,colors=brewer.pal(7,"Dark2"))
fav <- str_sub(MensajeMasFaveado$ext_media_expanded_url,45,58)
RT <- str_sub(MensajeMasRetuiteado$ext_media_expanded_url,45,58)
fav2 <- MensajeMasFaveado$status_id
RT2 <- MensajeMasRetuiteado$status_id
fav
tweet_screenshot(tweet_url(usuario, fav))
prueba1 = tweet_url(usuario, fav)
prueba1
MensajeMasFaveado$ext_media_expanded_url
fav <- str_sub(MensajeMasFaveado$ext_media_expanded_url,44,61)
fav
tweet_screenshot(tweet_url(usuario, fav))
fav
MensajeMasFaveado$ext_media_expanded_url
prueba3 <- str_sub("https://twitter.com/lanusmunicipio/status/1559999451724390400",43,60)
prueba3
prueba3 <- str_sub("https://twitter.com/munimardelplata/status/1560677902286405633",44,61)
prueba3
prueba3 <- str_sub("https://twitter.com/munimardelplata/status/1560677902286405633",44,62)
prueba3
